kind: pipeline
type: docker
name: build and test

steps:
- name: test
  image: node
  commands:
  - npm install
  - npm test
  when:
    event:
    - push
...